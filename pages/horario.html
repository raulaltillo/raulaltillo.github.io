<head>
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-T470HXGPQZ"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cal+Sans&display=swap" rel="stylesheet">
  <script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-T470HXGPQZ');
  </script>
  <title>Horario | Raulaltillo </title>
  <meta name="description" content="Obtén información sobre el horario de tu clase" />
  <link rel="icon" href="../favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="../main.css">
  <meta name="color-scheme" content="light only">
  <style>
    .column {
    border-radius: 15px; /* Rounded corners */
    padding: 10px; /* Padding inside the columns */
    flex: 1; /* Ensure columns take equal width */
    margin:1px
}

.row {
    display: flex;
    justify-content: space-between; /* Distribute columns evenly */
}
  </style>
</head>
<body>
  <div class="topnav">
    <img class="title" id="weather-icon"  src="../images/weather-icon-illustration03-Graphics-10205167-1.png" alt="Clima actual" width="50px">
    <a href="./horario.html" class="active" >Horario</a>
    <a href="./menu.html">Menu</a>
    <!--<a href="./book_answers.html">Respuestas Libros</a>--->
    <a href="./selectividad.html">Selectividad</a>
    <a href="https://docs.google.com/forms/d/e/1FAIpQLSdnBjqzIB08Ad6J5D6hyBe0z33kqKwkunFWNIXyWWmJCmnFjw/viewform?usp=sf_link" class="feedback-btn">Feedback</a>
    <!--<a href="pages/coding_answers.html">Coding/CS</a>-->
  </div>
  <div id="weatherIframeContainer" class="weather-iframe-container">
    <iframe name="iframe_aemet_id33044" src="https://www.aemet.es/es/eltiempo/prediccion/municipios/mostrarwidget/jerez-de-la-frontera-id11020?w=g4p011100000ohmffffffx000000t999999r1s8n2" scrolling="no"></iframe>
  </div>
  <div id="content">
      <br>
  <br>
  <br>
  <div style="border: solid 15px #0b0b0b; border-radius: 10px; padding:20; margin:20px">
  <div id="scheduleContainer" style="display: none;">
    <div id="schedule"></div>
</div>
  <div style="text-align: center; margin: 20px;">
    <label for="classSelect" style="font-size: 2em;color: #ffffff;font-family: Cal Sans;">Clase:</label>
    <select id="classSelect" onchange="selectClass()" style="font-size: 2em;font-family: Cal Sans;cursor: pointer;">
      <option value="">--Seleccionar Clase--</option>
      <option value="Salud Lomloe">Salud Lomloe</option>
      <option value="Salud IB">Salud IB</option>
      <option value="Tecnologico Lomloe">Tecnologico Lomloe</option>
      <option value="Tecnologico IB">Tecnologico IB</option>
      <option value="Sociales Lomloe">Sociales Lomloe</option>
      <option value="Sociales IB">Sociales IB</option>
      
    </select>
    
  <br>
  <br>
  <label for="colorSelect" style="font-size:2em;color: #ffffff;font-family: Cal Sans;" >Color:</label>
  <input type="color" id="colorSelect" oninput="changeColor()" style="font-size:2em;cursor:pointer">
  <p style="color: #ffffff;font-family: Cal Sans;">Esta seleccion se guarda entre sesiones</p>
</div>
</div>
  <script defer type="text/javascript">
function LightenDarkenColor(col, amt) {
    let usePound = false;

    if (col[0] === "#") {
        col = col.slice(1);
        usePound = true;
    }

    let num = parseInt(col, 16);

    let r = (num >> 16) + amt;
    if (r > 255) r = 255;
    else if (r < 0) r = 0;

    let g = ((num >> 8) & 0x00FF) + amt;
    if (g > 255) g = 255;
    else if (g < 0) g = 0;

    let b = (num & 0x0000FF) + amt;
    if (b > 255) b = 255;
    else if (b < 0) b = 0;

    let newColor = (r << 16) | (g << 8) | b;
    return (usePound ? "#" : "") + newColor.toString(16).padStart(6, "0");
}

const classes={ 
     "Salud Lomloe":[["TOK", "Biologia", "Filosofia", "", "Historia", "Mates", "", "Lengua", "Quimica"],
                    ["Lengua", "Exam Practice", "Mates", "", "Quimica", "Biologia", "", "Ingles", "Frances"],
                    ["Quimica", "Filosofia", "Mates", "", "TIC", "Historia", "", "Frances", "Exam Practice"],
                    ["Ingles", "Quimica", "Lengua", "", "Historia", "PS", "", "TIC", "Biologia"],
                    ["Ingles", "Biologia", "Mates", "", "Lengua", "Historia", "", "Filosofia", "TIC"]], 
     "Salud IB":[["Historia", "Biologia", "SAS", "", "Mates", "TOK", "", "Lengua", "Quimica"],
                    ["Frances IB", "Exam Practice", "SAS", "", "Quimica", "Biologia", "", "Ingles", "Frances"],
                    ["Quimica", "SAS", "Lengua", "", "Historia", "Mates", "", "Frances", "Exam Practice"],
                    ["Ingles", "Quimica", "Mates", "", "Lengua", "Historia", "", "Frances IB", "Biologia"],
                    ["Ingles", "Biologia", "Frances IB", "", "Mates", "Lengua", "", "SAS", "Biologia IB"]], 
      "Tecnologico Lomloe":[["PSP", "Historia", "Lengua", "", "Fisica", "Mates", "", "Filosofia", "TIC"],
                    ["Dibujo Tecnico", "Exam Practice", "Fisica", "", "Historia", "Filosofia", "", "English", "Frances"],
                    ["Historia", "Dibujo Tecnico", "Mates", "", "Lengua", "Fisica", "", "Frances", "Exam Practice"],
                    ["English", "TIC", "Lengua", "", "Mates", "TOK", "", "Dibujo Tecnico", "Filosofia"],
                    ["English", "Lengua", "Historia", "", "Fisica", "Mates", "", "TIC", "Dibujo Tecnico"]],
      "Tecnologico IB":[["Historia", "Fisica", "SAS", "", "Mates", "TOK", "", "Lengua", "SD"],
 ["SD", "Ingles", "SAS", "", "Dibujo Tecnico", "Fisica", "", "Ingles", "Frances"],
 ["Dibujo Tecnico", "Lengua", "Geografia", "", "Historia", "Mates", "", "Frances", "Ingles"],
 ["Ingles", "Dibujo Tecnico", "Mates", "", "Historia", "Lengua", "", "SD", "Fisica"],
 ["Ingles", "Dibujo Tecnico", "Historia", "", "Mates", "Lengua", "", "SAS", "Fisica"]],
      "Sociales Lomloe":[["Economia", "TIC", "Lengua", "", "Geografia", "Filosofia", "", "PS", "Mates"],
                    ["Geografia", "Ingles", "Historia", "", "TIC", "Mates", "", "Ingles", "Frances"],
                    ["TIC", "Mates", "Lengua", "", "TOK", "Economia", "", "Frances", "Ingles"],
                    ["Ingles", "Filosofia", "Historia", "", "Geografia", "Economia", "", "Mates", "Lengua"],
                    ["Ingles", "Historia", "Mates", "", "Filosofia", "Economia", "", "Geografia", "Lengua"]],
      "Sociales IB":[["Historia", "TOK", "Gestion", "", "Mates Aplicadas", "Lengua", "", "Geografia", "SAS"],
                    ["Frances IB", "Ingles", "Geografia", "",  "Mates", "Gestion", "",  "Ingles", "Frances"],
                    ["Gestion", "Lengua", "Geografia", "",  "Historia", "SAS", "", "Frances", "Ingles NS"],
                    ["Ingles", "Lengua", "SAS", "",  "Mates", "Historia", "",  "Frances IB", "Gestion"],
                    ["Ingles", "Geografia", "Frances IB", "",  "Mates", "SAS", "",  "Lengua", "Gestion"]],
};
    const days = ["Lunes", "Martes", "Miercoles", "Jueves", "Viernes"];
    var defaultColor = "#2d9e00"; // Default color if no color is saved
    var selectedColor = localStorage.getItem("selectedColor") || defaultColor;

    const colors = (baseColor) => [
        baseColor,
        LightenDarkenColor(baseColor, 15),
        LightenDarkenColor(baseColor, 30),
        LightenDarkenColor(baseColor, 45),
        LightenDarkenColor(baseColor, 60),
    ];

    function changeColor() {
    const newColor = document.getElementById("colorSelect").value;
    localStorage.setItem("selectedColor", newColor);
    updateScheduleColors(newColor);
}
    function updateScheduleColors(baseColor) {
        const updatedColors = colors(baseColor);
        const selectedClass = document.getElementById("classSelect").value;
        if (selectedClass) {
            const classSchedule = classes[selectedClass];
            document.getElementById("schedule").innerHTML = generateScheduleHTML(classSchedule, updatedColors);
        }
    }

    function generateDayColumn(day, subjects, color) {
    return `
        <div class="column" style="background-color:${color};">
            <h3 style="font-family:Hacked">${day}</h3>
            <pre>${subjects.join("\n")}</pre>
        </div>`;
}

    function generateScheduleHTML(classSchedule, colorPalette = colors(document.getElementById("colorSelect").value)) {
        return `<div class="row">
            ${classSchedule.map((subjects, index) => generateDayColumn(days[index], subjects, colorPalette[index])).join("")}
        </div>`;
    }

    function selectClass() {
        const selectedClass = document.getElementById("classSelect").value;
        if (selectedClass) {
            localStorage.setItem("selectedClass", selectedClass);
            displayClassSchedule(selectedClass);
        }
    }

    function displayClassSchedule(className) {
        const classSchedule = classes[className];
        document.getElementById("schedule").innerHTML = generateScheduleHTML(classSchedule);
        document.getElementById("scheduleContainer").style.display = "block";
    }

    window.onload = function() {
        const savedClass = localStorage.getItem("selectedClass");
        const savedColor = localStorage.getItem("selectedColor") || defaultColor;
        document.getElementById("colorSelect").value = savedColor;

        if (savedClass) {
            document.getElementById("classSelect").value = savedClass;
            displayClassSchedule(savedClass);
        }
        updateScheduleColors(savedColor);
    };
    </script></div>
  <script async src="../scripts/fade.js"></script>
</body>
